---
node_id: 3609
title: 'Peak Season Prep Guide: Preparing your Ecommerce Site for the Next Big Rush'
type: whitepaper
created_date: '2013-07-09'
created_by: Rackspace Support
last_modified_date: '2015-07-21'
last_modified_by: Max Francisco
product: White Paper
product_url: white-paper
resource: 'https://8026b2e3760e2433679c-fffceaebb8c6ee053c935e8915a3fbe7.ssl.cf2.rackcdn.com/whitepaper_pdf/Rackspace_Peak_Season_Prep_2014_update.pdf'
---

<h3>Introduction</h3>

<p>Most retailers are familiar with the holiday rush. In brick and mortars, it's the time of year when more hiring happens to ensure smiling faces in the store to help eager customers and enough cashiers at the registers for fast, stress-free checkout. For an ecommerce retailer, beefing up for peak traffic is less about hiring more bodies and more about tuning up the systems and processes that bring, keep, and allow customers to seamlessly make transactions on a site.</p>

<p>Lags in page load not only frustrate users, but <a href="http://googlewebmastercentral.blogspot.co.uk/2010/04/using-site-speed-in-web-search-ranking.html">Google's search algorithms</a> now also penalize sites for slow loads. Take the holiday season—the sales have crept earlier and earlier each year, with some retailers offering deals in October and early November. According to a Shop.org survey of shoppers in 2013, more than 40 percent said they started their shopping in October or earlier<sup>1</sup>. Coupled with the overall growth of online sales, these statistics further increase the need for a well-planned ecommerce strategy, both on the customer-facing side and in your underlying infrastructure.</p>

<p>Getting ready for a peak period, whether it's the holidays, summer tourism, or a far-reaching marketing campaign, involves evaluating both your infrastructure and code to optimize for best results. The cornerstone of peak traffic planning is rigorously load testing your system ahead of time to identify and correct breakpoints and bottlenecks.</p>

<h3>Test your site before a traffic spike</h3>

<p>Load testing gives you a window into how your site will perform when peak traffic arrives. The steps below lay out high-level steps involved in load testing.</p>

<ol>
	<li><strong>Determine testing goals</strong>: The initial testing should be a complete end-to-end test. Follow up tests may only cover post-optimization testing of specific pages or processes. Also, keep in mind that different types of users use your site differently. A computer buyer may be divided into segments like consumer, business, and government. The consumer user theoretically takes a different path than a government user, hence a different load on the system that needs optimization. By narrowly defining test objectives and user types, you get more defined results to guide optimization. Use your goals to create a list of questions your test needs to answer, for example:
		<ul>
			<li>How many concurrent requests can my system handle at maximum load?</li>
			<li>Are response times for all test paths acceptable?</li>
			<li>What points in the chain are consuming the most hardware resources?</li>
			<li>Are there obvious failures caused by large data sets, multiple concurrent users, amount of products on the site, shopping cart functionality, or other factors?</li>
			<li>Is there any obvious low hanging fruit to optimize? Examples: unnecessary database queries, frequently used code paths that produce a consistent result or frequently repeating database queries that can be cached.</li>
		</ul>
	</li>
	<li><strong>Start with a benchmark</strong>: Review logs and analytics to see how you've performed during previous peak periods and determine what a typical busy load looks like. Use tools like apache bench or autobench to simulate multiple concurrent users for a benchmark of how many requests per second you're capable of serving. Pay special attention to heavily trafficked pages like home and landing pages where optimization efforts have the biggest payoff. To compare your performance and set benchmarks aligned with other retailers, take a look at <a href="http://www.compuware.com/en_us/application-performance-management/Benchmarks/US/Retail/us-retail-web---mobile-site-performance-indices.html.html">Compuware's Retail Web and Mobile Site Performance Index</a>.</li>
	<li><strong>Determine data collection methods</strong>: Organized data collection is essential to understanding results and learning from them. <a href="http://www.wilsonmar.com/1loadrun.htm">LoadRunner</a> is a software tool that provides sophisticated formatting, flexibility and analysis. <a href="http://msdn.microsoft.com/en-us/library/ms182600%28v%3Dvs.90%29.aspx">Microsoft Visual Studio</a> has a SQL script for creating a database repository for results. Evaluate a prospective test data collection tool based on its ability to:
		<ul>
			<li>Thoroughly document the test conditions</li>
			<li>Accurately document the results</li>
			<li>Offer a straightforward analysis of results</li>
			<li>Archive test data for future comparisons<br />
			Use a set of monitoring tools to obtain accurate data about actual test performance in simple visual graphs:
			<ul>
				<li><a href="http://www.cacti.net/">Cacti</a> for capturing metrics</li>
				<li><a href="https://www.webyog.com/product/monyog">MONyog</a> for monitoring the database</li>
				<li><a href="https://github.com/etsy/statsd/#statsd-">statsd</a> to put stats logging into code to monitor code performance in real time</li>
			</ul>
		</li>
	</ul></li>
	<li><strong>Create scripts</strong>: Scripts generate test data and simulate user interaction. The scripts flood the site with requests so that you can identify bottlenecks that occur only during heavy traffic periods. A script will be made for each test path, cookies and all. JMeter is an open source load testing software designed to load test functional behavior and measure performance. JMeter scripts are easy to make into templates, and can be copied and pasted to create new ones. Common scripts include:
		<ul>
			<li>Randomly create products</li>
			<li>Randomly create orders (fill up a cart, then checkout)</li>
			<li>Randomly create customer accounts (can combine this with creating an order script)</li>
			<li>Make changes in the admin interface (creating categories, configuration changes)</li>
		</ul>
		<p>These scripts will be run both individually and simultaneously to find performance limits.</p>
	</li>
	<li><strong>Define the test environment</strong>: In practice, the load test environment contains:
		<ul>
			<li>Name of the person running the test</li>
			<li>The date, time and duration of the run</li>
			<li>A clearly defined hypothesis</li>
			<li>A statement of what has changed</li>
			<li>A set of metrics being tracked during the test</li>
			<li>A post-run capture of the results of the metrics, best visualized with a graph of the metric over time</li>
		</ul>
		<p>By saving this information in spreadsheets, you achieve provable results and can identify the most effective tests.</p>
		<p>At the completion of the test, you should have a set of data that answers the questions set forth when goals were defined in the beginning. The answers will then guide your next steps for optimization. After optimizing, it's critical to retest to account for any anomalies the optimization may create as fixing one problem can sometimes create another problem that you don't want to wait till you're in the middle of a spike to discover.</p>
	</li>
</ol>

<h3>Solutions for common issues that testing uncovers</h3>

<ul>
	<li><strong>Need load balancing</strong>
    <p>If site traffic reports reveal an increase in the number of refused connections during load testing, it's time to reassess your load balancing solution. Refused connections are the first sign that your serving capacity is too small for the amount of traffic your site receives. The next sign will probably be visitors calling or emailing to complain that they can't access or transact on your site.</p>
		<p>The number of load balancers you deploy is determined by your traffic and performance goals; there is no magic formula. Using the data from the load test will help you determine the number and location of load balancers. Once in place, re-test to confirm that the load balancer can handle the expected load.</p>
	</li>
	<li><strong>Need better compression</strong>
		<p>Implementing server-side compression can reduce the size of your store pages by reducing the time to return data from the server and making a web server process available sooner. Most modern browsers and web servers are capable of compressing data to send and decompressing at the destination. This helps lower bandwidth requirements but can increase the CPU loads.</p>
		<p>Smaller files lead to faster page load times. The two most common options here are to minimize your CSS and JavaScript, removing white space and increasing readability (using a tool like the <a href="http://www.refresh-sf.com/yui/">YUI Compressor</a>), and to reduce the size of your images by removing unnecessary data from them with a tool like <a href="http://www.smushit.com/ysmush.it/">smush.it</a>.</p>
	</li>
	<li><strong>Need a content delivery network (CDN)</strong>
		<p>Using a CDN can help speed up sluggish page loads. On a CDN, the first time content is served to a user, a copy of the content is stored on edge servers geographically closest to that user. Subsequent requests use the stored copy, resulting in faster load time. Hosting landing pages or other heavily trafficked static pages on the CDN helps to maintain a persistent, consistent web presence. As more people visit your site, your landing page will be cached worldwide and as a result load times will improve.</p>
		<p>Publishing static content to a CDN rather than the web server can be easily accomplished with services like <a href="http://www.rackspace.com/cloud/files/">Rackspace Cloud Files</a>, built with Akamai's CDN technology. W3 Total Cache and PressFlow have built-in CDN technology as well.</p>
	</li>
	<li><strong>Need more efficient code</strong>
		<p>There are many services associated with ecommerce and social media that may provide code for you to place either site-wide or on particular pages. These code snippets, used for social sharing, analytics, widgets, etc., are HTML/JavaScript. Many use external requests to the third party, which lag and may not be cached on their end. Where possible, choose solutions for common page elements that avoid third-party code. Another common solution for troublesome JavaScript is to load the code on document ready (when the DOM is fully loaded), rather than including it in your mark-up directly.</p>
		<p>Database-heavy sites may benefit from database optimizations, such as schema changes and indexing of commonly queried columns. Avoid using bloated frameworks and libraries.</p>
	</li>
	<li><strong>Need full page caching</strong>
		<p>Caching is an easy way to speed up your application or website which can help with your bounce rate, saving you from potential lost revenue. Determine what data you access frequently and cache it in memory for repeated high-speed access to it. Whether your application is generating static content for web pages or storing sessions in caches, you have to decide how to store those caches. You can store them on your local file system or utilize distributed memory caches like memcached clusters.</p>
	</li>
	<li><strong>Need autoscaling</strong>
		<p>Despite your best planning efforts, your site can still experience spikes outside planned peak capacity. For example, a site may typically run on two servers and occasionally traffic spikes up requiring a third server. If that spike is predictable, your team can hop in ahead of time to provision the extra server and decommission it when it's no longer needed.</p>
		<p>If that spike is unpredictable, you may be forced to hold on to a third server to cover that spike when or if it happens. With an autoscaling tool, you don't have to hold on to that third server. By setting traffic, performance, or other variables, the third server is launched only when needed and automatically decommissioned when the launch parameters subside.</p>
	</li>
	<li><strong>Need a hybrid cloud</strong>
		<p>Many still think that if they can't go all cloud, they can't use cloud at all. Not so. A hybrid cloud configuration lets you buy the base and rent the spike. You're able to put the elements in place that you need to run your site now with the ability to burst into the cloud for traffic spikes or to expand functionality without re-architecting or changing platforms.</p>
		<p>With <a href="http://www.rackspace.com/cloud/hybrid/">Hybrid Cloud</a>, an ecommerce store can tap cloud efficiencies for caching, image and video storage, or other resource-intensive, non-critical elements while keeping other elements like payment processing and other security-sensitive site elements on private cloud or on-premises gear to meet PCI compliance and other security.</p>
	</li>
</ul>

<h3>Plan for peak success with Rackspace</h3>

<p>When lifestyle brand <a href="http://www.alexandani.com/">Alex &amp; Ani</a> ran an ad for the 2014 Super Bowl, the company knew that site performance was key. “Every second costs money. For every second you add to the loading process, you're reducing your conversion rate by 7 percent, and that adds up,” said Ryan Bonifacio, Alex & Ani Vice President of Digital Strategy. The ad brought 28,000 people to Alex & Ani's website and any lag in loading would have been disastrous. Bonifacio came to Rackspace because he was looking for a hosting partner with the necessary performance experience. “Maximizing uptime was one of our biggest requirements in doing diligence with hosting providers. Rackspace was rated the top,” he said.</p>

<p>The <a href="http://www.rackspace.com/ecommerce-hosting/">Rackspace ecommerce hosting environment</a> is designed to support customers with resources that effortlessly scale from small to large volumes of traffic. We can help you with the technology needed to develop, test, and scale your site to manage and optimize a spike instead of losing customers.</p>

<p><a href="http://www.rackspace.com/ecommerce-hosting/"><img align="middle" height="396" src="https://8026b2e3760e2433679c-fffceaebb8c6ee053c935e8915a3fbe7.ssl.cf2.rackcdn.com/peakseaon-1.png" width="589" /></a></p>

<p>References:</p>

<p><sup>1</sup> <a href="https://www.internetretailer.com/2013/02/04/unwrapping-holidays">https://www.internetretailer.com/2013/02/04/unwrapping-holidays</a></p>
